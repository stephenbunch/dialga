{
  "version": 3,
  "sources": [
    "../arceus/node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/DailyEngine.js",
    "src/Mask.js",
    "src/MonthEngine.js",
    "src/MonthNthEngine.js",
    "src/MonthlyEngine.js",
    "src/Pattern.js",
    "src/WeeklyEngine.js",
    "src/YearNthEngine.js",
    "src/YearlyEngine.js",
    "src/days.js",
    "src/errors/src/InvalidDateError.js",
    "src/errors/src/InvalidMaskError.js",
    "src/errors/src/InvalidOperationError.js",
    "src/errors/src/InvalidPatternError.js",
    "src/index.js",
    "src/type.js",
    "src/util.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import {\n  durationToDays,\n  getDate,\n  plusDays,\n} from './util';\n\nexport default class DailyEngine {\n  constructor(pattern) {\n    this._interval = pattern.interval;\n    this._startDate = pattern.start_date;\n    this._firstOccurrence = getDate(pattern.start_date);\n    this._lastOccurrence = pattern.end_date ? getDate(pattern.end_date) : null;\n  }\n\n  /**\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  snapToOccurrence(date, direction) {\n    let remainder = durationToDays(date - this._firstOccurrence) % this._interval;\n    let occurrence = plusDays(date, remainder * direction);\n    if (occurrence < this._firstOccurrence) {\n      occurrence = this._firstOccurrence;\n    }\n    if (this._lastOccurrence && occurrence > this._lastOccurrence) {\n      occurrence = this._lastOccurrence;\n    }\n    return occurrence;\n  }\n\n  /**\n   * @param {Date} occurrence\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  next(occurrence, direction) {\n    return plusDays(occurrence, this._interval * direction);\n  }\n\n  /**\n   * Gets a value indicating whether the date falls on the pattern interval.\n   * @param {Date} date\n   * @returns {Boolean}\n   */\n  matchesInterval(date) {\n    let days = durationToDays(date - getDate(this._startDate));\n    return days % this._interval === 0;\n  }\n};\n",
    "import InvalidMaskError from './errors/InvalidMaskError';\nimport {\n  durationToDays,\n  getDate,\n  getString,\n  plusDays,\n  repeat,\n  validateDate\n} from './util';\n\nexport default class Mask {\n  /**\n   * A mask contains a start date and a series of 1s and 0s where a 1 represents\n   * an occurrence. A mask always starts and ends with a 1. It may also contain a\n   * single 1 if there is only one occurrence.\n   * @param {String} mask\n   */\n  constructor(mask) {\n    this.value = mask || '';\n    this.start_date = null;\n\n    if (this.value) {\n      let parts = this.value.split('|');\n      if (parts.length !== 2) {\n        throw new InvalidMaskError('Mask is invalid. Expected format [yyyy-mm-dd]|[mask] but found \"' + this.value + '\".');\n      }\n      validateDate(parts[0]);\n      this.start_date = parts[0];\n      if (parts[1][0] !== '1') {\n        throw new InvalidMaskError('Mask format is invalid. Mask value should begin with a \"1\".');\n      }\n      if (parts[1][parts[1].length - 1] !== '1') {\n        throw new InvalidMaskError('Mask format is invalid. Mask value should end with a \"1\".');\n      }\n    }\n  }\n\n  toJSON() {\n    return this.toString();\n  }\n\n  toString() {\n    return this.value;\n  }\n\n  /**\n   * @param {Mask|String} mask\n   * @returns {Mask}\n   */\n  or(mask) {\n    return this._op(mask, (a, b) => {\n      return Boolean(Number(a)) | Boolean(Number(b));\n    });\n  }\n\n  /**\n   * @param {Mask|String} mask\n   * @returns {Mask}\n   */\n  and(mask) {\n    return this._op(mask, (a, b) => {\n      return Boolean(Number(a)) & Boolean(Number(b));\n    });\n  }\n\n  /**\n   * @param {Mask|String} mask\n   * @returns {Mask}\n   */\n  xor(mask) {\n    return this._op(mask, (a, b) => {\n      return Boolean(Number(a)) ^ Boolean(Number(b));\n    });\n  }\n\n  /**\n   * @param {Mask|String} mask\n   * @returns {Mask}\n   */\n  not(mask) {\n    return this._op(mask, (a, b) => {\n      if (Boolean(Number(b))) {\n        return 0;\n      } else {\n        return Number(Boolean(Number(a)));\n      }\n    });\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Boolean}\n   */\n  matches(date) {\n    if (!this.value) {\n      return false;\n    }\n    let values = this.value.split('|');\n    let start = values[0];\n    if (date < start) {\n      return false;\n    }\n    let index = durationToDays(getDate(date) - getDate(start));\n    return values[1][index] === '1';\n  }\n\n  /**\n   * @returns {Array.<String>}\n   */\n  getDates() {\n    if (!this.value) {\n      return [];\n    }\n    let dates = [];\n    let values = this.value.split('|');\n    let start = values[0];\n    dates.push(start);\n    start = getDate(start);\n    let days = values[1].split('');\n    let length = days.length;\n    for (let i = 1; i < length; i++) {\n      if (days[i] === '1') {\n        dates.push(getString(plusDays(start, i)));\n      }\n    }\n    return dates;\n  }\n\n  /**\n   * @returns {Array.<String>|null}\n   */\n  getRange() {\n    if (!this.value) {\n      return null;\n    }\n    let values = this.value.split('|');\n    let start = getDate(values[0]);\n    let end = plusDays(start, values[1].length - 1);\n    return [getString(start), getString(end)];\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Mask}\n   */\n  addDate(date) {\n    return this.or(date + '|1');\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Mask}\n   */\n  removeDate(date) {\n    return this.not(date + '|1');\n  }\n\n  /**\n   * @param {String} date\n   * @param {Boolean} [state]\n   * @returns {Mask}\n   */\n  toggleDate(date, state) {\n    if (state === undefined) {\n      if (this.matches(date)) {\n        return this.removeDate(date);\n      } else {\n        return this.addDate(date);\n      }\n    } else {\n      if (state) {\n        return this.addDate(date);\n      } else {\n        return this.removeDate(date);\n      }\n    }\n  }\n\n  _op(mask, op) {\n    let masks = Mask.commonalize(this.value, mask);\n    if (!masks[0]) {\n      return new Mask();\n    }\n    let a = masks[0].split('|')[1].split('');\n    let b = masks[1].split('|')[1].split('');\n    let result = [];\n    let length = a.length;\n    for (let i = 0; i < length; i++) {\n      result[i] = op(a[i], b[i]);\n    }\n    return new Mask(Mask.trim(masks[0].split('|')[0] + '|' + result.join('')), false);\n  };\n\n  /**\n   * @param {Array.<String>} dates\n   * @returns {Mask}\n   */\n  static fromDates(dates) {\n    if (!dates || !dates.length) {\n      return new Mask();\n    }\n    dates = dates.slice().sort();\n    let start = dates[0];\n    let mask = '1';\n    let length = dates.length;\n    for (let i = 1; i < length; i++) {\n      mask += repeat('0', durationToDays(getDate(dates[i]) - getDate(dates[i - 1])) - 1);\n      mask += '1';\n    }\n    return new Mask(start + '|' + mask);\n  }\n\n  /**\n   * Trims the mask. Any leading and trailing zeros are removed, and the start\n   * date is updated accordingly.\n   * @param {String} mask\n   * @returns {String}\n   */\n  static trim(mask) {\n    if (!mask || mask.indexOf('1') === -1) {\n      return '';\n    } else {\n      let parts = mask.split('|');\n      let start = parts[0];\n      let value = parts[1];\n      if (value.indexOf('1') === -1) {\n        return '';\n      } else if (value[0] === '1' && value[value.length - 1] === '1') {\n        return mask;\n      } else {\n        start = getString(plusDays(getDate(start), value.indexOf('1')));\n        value = value.substring(value.indexOf('1'), value.lastIndexOf('1') + 1);\n        return start + '|' + value;\n      }\n    }\n  }\n\n  /**\n   * Takes two masks and returns two new masks with the same start and end dates\n   * Note that these masks are potentially invalid since they are untrimmed. To\n   * trim them, use Mask.trim().\n   * @param {Mask|String} maskA\n   * @param {Mask|String} maskB\n   * @returns {Array.<String>}\n   */\n  static commonalize(maskA, maskB) {\n    maskA = maskA && maskA.toString();\n    maskB = maskB && maskB.toString();\n    let a = !!maskA && maskA.split('|');\n    let b = !!maskB && maskB.split('|');\n    if (!a && !b) {\n      return ['', ''];\n    }\n    if (!a) {\n      a = [b[0], repeat('0', b[1].length)];\n    } else if ( !b ) {\n      b = [a[0], repeat('0', a[1].length)];\n    }\n    let diff;\n    if (a[0] < b[0]) {\n      diff = durationToDays(getDate(b[0]) - getDate(a[0]));\n      a[1] += repeat('0', diff);\n      b[1] = repeat('0', diff) + b[1];\n      b[0] = a[0];\n    } else if (b[0] < a[0]) {\n      diff = durationToDays(getDate(a[0]) - getDate(b[0]));\n      b[1] += repeat('0', diff);\n      a[1] = repeat('0', diff) + a[1];\n      a[0] = b[0];\n    }\n    if (a[1].length < b[1].length) {\n      a[1] += repeat('0', b[1].length - a[1].length);\n    }\n    if (b[1].length < a[1].length) {\n      b[1] += repeat('0', a[1].length - b[1].length);\n    }\n    return [a.join('|'), b.join('|')];\n  }\n};\n",
    "import {\n  getDate,\n  getMonth,\n  getMonthsBetween,\n  getYear,\n} from './util';\n\nexport default class MonthEngine {\n  constructor({ start, end, interval, resolve }) {\n    this._interval = interval;\n    this._resolve = resolve;\n\n    let patternStart = getDate(start);\n    let year = getYear(patternStart);\n    let month = getMonth(patternStart);\n    let firstOccurrence = this._resolveDate(year, month);\n    if (firstOccurrence < patternStart) {\n      firstOccurrence = this._resolveDate(year, month + interval);\n    }\n    this.firstOccurrence = firstOccurrence;\n\n    if (end) {\n      this.lastOccurrence = this._getOccurrenceUntil(getDate(end));\n    } else {\n      this.lastOccurrence = null;\n    }\n  }\n\n  /**\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  snapToOccurrence(date, direction) {\n    let occurrence = this._getOccurrenceUntil(date);\n    if (occurrence < date && direction > 0) {\n      occurrence = this._resolveDate(getYear(occurrence), getMonth(occurrence) + this._interval);\n    } else if (occurrence > date && direction < 0) {\n      occurrence = this._resolveDate(getYear(occurrence), getMonth(occurrence) - this._interval);\n    }\n    if (occurrence < this.firstOccurrence) {\n      occurrence = this.firstOccurrence;\n    } else if (this.lastOccurrence && occurrence > this.lastOccurrence) {\n      occurrence = this.lastOccurrence;\n    }\n    return occurrence;\n  }\n\n  /**\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  next(occurrence, direction) {\n    return this._resolveDate(getYear(occurrence), getMonth(occurrence) + (this._interval * direction));\n  }\n\n  /**\n   * @param {Date} date\n   * @returns {Date}\n   */\n  _getOccurrenceUntil(date) {\n    if (date < this.firstOccurrence) {\n      return this.firstOccurrence;\n    }\n    let months = Math.floor(getMonthsBetween(this.firstOccurrence, date) / this._interval) * this._interval;\n    let occurrence = this._resolveDate(getYear(this.firstOccurrence), getMonth(this.firstOccurrence) + months);\n    if (occurrence > date) {\n      occurrence = this._resolveDate(getYear(occurrence), getMonth(occurrence) - this._interval);\n    }\n    if (occurrence < this.firstOccurrence) {\n      occurrence = this.firstOccurrence;\n    }\n    return occurrence;\n  }\n\n  /**\n   * @param {Number} year\n   * @param {Number} month\n   * @returns {Date}\n   */\n  _resolveDate(year, month) {\n    if (month > 12) {\n      year += Math.floor(month / 12);\n      month -= Math.floor(month / 12) * 12;\n    } else if (month < 1) {\n      year -= Math.ceil((month - 1) * -1 / 12);\n      month += Math.ceil((month - 1) * -1 / 12) * 12;\n    }\n    return this._resolve(year, month);\n  }\n};\n",
    "import {\n  dayOfWeekFromFlag,\n  getDayOfWeek,\n  getInstance,\n  getMonthsBetween,\n  resolveInstanceDate,\n} from './util';\n\nimport MonthEngine from './MonthEngine';\n\nexport default class MonthNthEngine {\n  constructor(pattern) {\n    this._dayOfWeek = dayOfWeekFromFlag(pattern.day_of_week_mask);\n    this._interval = pattern.interval;\n    this._instance = pattern.instance;\n    this._engine = new MonthEngine({\n      start: pattern.start_date,\n      end: pattern.end_date,\n      interval: this._interval,\n      resolve: (year, month) => resolveInstanceDate(year, month, this._instance, this._dayOfWeek)\n    });\n  }\n\n  snapToOccurrence(date, direction) {\n    return this._engine.snapToOccurrence(date, direction);\n  }\n\n  next(occurrence, direction) {\n    return this._engine.next(occurrence, direction);\n  }\n\n  matchesInterval(date) {\n    return (\n      getDayOfWeek(date) === this._dayOfWeek &&\n      getInstance(date) === this._instance &&\n      getMonthsBetween(date, this._engine.firstOccurrence) % this._interval === 0\n    );\n  }\n};\n",
    "import {\n  getMonth,\n  getMonthsBetween,\n  getYear,\n  resolveDate,\n} from './util';\n\nimport MonthEngine from './MonthEngine';\n\nexport default class MonthlyEngine {\n  constructor(pattern) {\n    this._interval = pattern.interval;\n    this._day = pattern.day_of_month;\n    this._engine = new MonthEngine({\n      start: pattern.start_date,\n      end: pattern.end_date,\n      interval: pattern.interval,\n      resolve: (year, month) => resolveDate(year, month, pattern.day_of_month)\n    });\n  }\n\n  /**\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  snapToOccurrence(date, direction) {\n    return this._engine.snapToOccurrence(date, direction);\n  }\n\n  /**\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  next(occurrence, direction) {\n    return this._engine.next(occurrence, direction);\n  }\n\n  /**\n   * Gets a value indicating whether the date falls on the pattern interval.\n   * @param {Date} date\n   * @returns {Date}\n   */\n  matchesInterval(date) {\n    return (\n      +resolveDate(getYear(date), getMonth(date), this._day) === +date &&\n      getMonthsBetween(this._engine.firstOccurrence, date) % this._interval === 0\n    );\n  }\n};\n",
    "import TYPE from './type';\n\nimport {\n  dayOfWeekFromFlag,\n  durationToDays,\n  find,\n  findIndex,\n  getDate,\n  getString,\n  normalizeDirection,\n  plusDays,\n  repeat,\n  validateDate\n} from './util';\n\nimport InvalidPatternError from './errors/InvalidPatternError';\nimport InvalidOperationError from './errors/InvalidOperationError';\n\nimport Mask from './Mask';\n\nimport DailyEngine from './DailyEngine';\nimport WeeklyEngine from './WeeklyEngine';\nimport MonthlyEngine from './MonthlyEngine';\nimport MonthNthEngine from './MonthNthEngine';\nimport YearlyEngine from './YearlyEngine';\nimport YearNthEngine from './YearNthEngine';\n\nexport default class Pattern {\n  /**\n   * @param {PatternJson} [pattern]\n   */\n  constructor(pattern) {\n    this.value = {\n      start_date: null,\n      end_date: null,\n      type: null,\n      day_of_week_mask: null,\n      day_of_month: null,\n      month_of_year: null,\n      interval: null,\n      instance: null,\n      exceptions: [],\n      ...pattern\n    };\n    this._validated = false;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  validate() {\n    if (this._validated) {\n      return this;\n    }\n    this._validatePeriod();\n    this._validateType();\n    this._validateDayOfWeekMask();\n    this._validateInterval();\n    this._validateExceptions();\n    this._validated = true;\n    return this;\n  }\n\n  /**\n   * @param {Number} interval\n   * @returns {Pattern}\n   */\n  every(interval = 1) {\n    this._validated = false;\n    this.value.interval = interval;\n    return this;\n  }\n\n  /**\n   * @param {Number} [dayOfMonth]\n   * @returns {Pattern}\n   */\n  day(dayOfMonth) {\n    if (dayOfMonth === undefined) {\n      return this.days();\n    } else {\n      this._validated = false;\n      this.value.instance = null;\n      this.value.day_of_month = dayOfMonth;\n      return this;\n    }\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  days() {\n    this._validated = false;\n    this.value.type = TYPE.Daily;\n    this.value.day_of_week_mask = null;\n    this.value.instance = null;\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  week() {\n    this._validated = false;\n    this.value.type = TYPE.Weekly;\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  weeks() {\n    return this.week();\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  month() {\n    this._validated = false;\n    if (this.value.instance) {\n      this.value.type = TYPE.MonthNth;\n    } else {\n      this.value.type = TYPE.Monthly;\n      this.value.day_of_week_mask = null;\n    }\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  months() {\n    return this.month();\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  year() {\n    this._validated = false;\n    if (this.value.instance) {\n      this.value.type = TYPE.YearNth;\n    } else {\n      this.value.type = TYPE.Yearly;\n      this.value.day_of_week_mask = null;\n    }\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  years() {\n    return this.year();\n  }\n\n  /**\n   * @param {Number} dayOfWeekMask\n   * @returns {Pattern}\n   */\n  on(dayOfWeekMask) {\n    this._validated = false;\n    this.value.day_of_week_mask = dayOfWeekMask;\n    this.value.instance = null;\n    return this;\n  }\n\n  /**\n   * @param {Number} instance\n   * @param {Number} dayOfWeek\n   * @returns {Pattern}\n   */\n  the(instance, dayOfWeek) {\n    this._validated = false;\n    this.value.instance = instance;\n    this.value.day_of_week_mask = dayOfWeek;\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Pattern}\n   */\n  from(date) {\n    this._validated = false;\n    this.value.start_date = date;\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Pattern}\n   */\n  to(date) {\n    this._validated = false;\n    this.value.end_date = date;\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @param {String} newDate\n   * @returns {Pattern}\n   */\n  addException(date, newDate) {\n    this._validated = false;\n    let exception = find(this.value.exceptions, function(exception) {\n      return exception.original_date === date;\n    });\n    if (!exception) {\n      exception = {};\n      this.value.exceptions.push(exception);\n    }\n    exception.original_date = date;\n    exception.date = newDate;\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Pattern}\n   */\n  removeException(date) {\n    this._validated = false;\n    let index = findIndex(this.value.exceptions, function(exception) {\n      return exception.original_date === date;\n    });\n    if (index > -1) {\n      this.value.exceptions.splice(index, 1);\n    }\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  removeAllExceptions() {\n    this._validated = false;\n    this.value.exceptions = [];\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Pattern}\n   */\n  findException(date) {\n    return find(this.value.exceptions, function(exception) {\n      return exception.original_date === date;\n    });\n  }\n\n  /**\n   * Determines whether the specified date occurs in the recurrence pattern.\n   * @param {String} date\n   * @returns {Boolean}\n   */\n  matches(date) {\n    this.validate();\n    if (this._exceptionsByDate[date]) {\n      return true;\n    }\n    if (this._moved[date]) {\n      return false;\n    }\n    if (!this._doesOccurWithinPeriod(date)) {\n      return false;\n    }\n    return this._engine.matchesInterval(getDate(date));\n  }\n\n  /**\n   * Gets the recurrence pattern as a plain old JSON object.\n   * @returns {PatternJson}\n   */\n  toJSON() {\n    return this.value;\n  }\n\n  /**\n   * @param {String} [end]\n   * @returns {Mask}\n   */\n  toMask(end) {\n    end = end || this.value.end_date;\n    if (!end) {\n      throw new InvalidOperationError('An end date is required to generate a mask.');\n    }\n    let mask = '';\n    let last, next;\n    while (next = this.next(last)) {\n      if (next > end) {\n        break;\n      }\n      let days = durationToDays(getDate(next) - getDate(last || this.value.start_date));\n      if (last) {\n        days -= 1;\n      }\n      mask += repeat('0', days);\n      mask += '1';\n      last = next;\n    }\n    if (mask) {\n      return new Mask(Mask.trim(this.value.start_date + '|' + mask));\n    } else {\n      return new Mask();\n    }\n  };\n\n  /**\n   * Gets the next occurrence or exception in the recurrence pattern after the\n   * specified date or returns false if there are no more occurrences.\n   * @param {String} [start] The date to search from.\n   * @param {Number} [direction]\n   *   A value indicating direction. Positive goes forward, negative goes backward.\n   * @returns {String|Boolean}\n   */\n  next(start, direction) {\n    this.validate();\n    if (typeof start !== \"string\") {\n      direction = start;\n      start = getString(plusDays(getDate(this.value.start_date), -1));\n    }\n    let date = start;\n    while (true) {\n      date = getString(this._getNextOccurrence(getDate(date), normalizeDirection(direction)));\n      if (this._doesOccurWithinPeriod(date)) {\n        // See if there's an exception for this date.\n        let exception = this._exceptionsByOriginalDate[date];\n        if (exception) {\n          if (exception.date) {\n            return date;\n          } else {\n            // This occurence was deleted. Get the next one.\n          }\n        } else {\n          return date;\n        }\n      } else {\n        // We're outside the range of the recurrence pattern.\n        return false;\n      }\n    }\n  }\n\n  /**\n   * Gets the next date in the recurrence pattern after the specified date\n   * or returns false if there are no more occurrences.\n   * @param {String} start The date to search from.\n   * @param {Number} [direction]\n   *   A value indicating direction. Positive goes forward, negative goes backward.\n   * @returns {String|Boolean}\n   */\n  nextPatternDate(start, direction) {\n    this.validate();\n    let date = getString(this._getNextOccurrence(getDate(start), normalizeDirection(direction)));\n    if (this._doesOccurWithinPeriod(date)) {\n      return date;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Gets the next occurrence, or returns the specified date if it's valid.\n   * @param {String} date\n   * @param {Number} [direction]\n   *   A value indicating direction. Positive goes forward, negative goes backward.\n   * @returns {String|Boolean}\n   */\n  snap(date, direction) {\n    this.validate();\n    return getString(this._snapToOccurrence(getDate(date), normalizeDirection(direction)));\n  }\n\n  _validatePeriod() {\n    if (!this.value.start_date) {\n      throw new InvalidPatternError('A start date is required.');\n    }\n    this.value.start_date = String(this.value.start_date);\n    validateDate(this.value.start_date);\n    if (this.value.end_date) {\n      this.value.end_date = String(this.value.end_date);\n      validateDate(this.value.end_date);\n      if (this.value.start_date > this.value.end_date) {\n        throw new InvalidPatternError('The end date must be greater than or equal to the start date');\n      }\n    }\n  }\n\n  _validateType() {\n    if (!this.value.type) {\n      throw new InvalidPatternError('A recurrence type is required.');\n    }\n    this.value.type = Number(this.value.type);\n    switch (this.value.type) {\n      case TYPE.Daily:\n        this._engine = new DailyEngine(this.value);\n        break;\n      case TYPE.Weekly:\n        this._engine = new WeeklyEngine(this.value);\n        break;\n      case TYPE.Monthly:\n        this._engine = new MonthlyEngine(this.value);\n        break;\n      case TYPE.MonthNth:\n        this._engine = new MonthNthEngine(this.value);\n        break;\n      case TYPE.Yearly:\n        this._engine = new YearlyEngine(this.value);\n        break;\n      case TYPE.YearNth:\n        this._engine = new YearNthEngine(this.value);\n        break;\n      default:\n        throw new InvalidPatternError('The recurrence type \"' + this.value.type + '\" is invalid.');\n    }\n  }\n\n  _validateDayOfWeekMask() {\n    if (\n      this.value.type === TYPE.Weekly ||\n      this.value.type === TYPE.MonthNth ||\n      this.value.type === TYPE.YearNth\n    ) {\n      if (!this.value.day_of_week_mask) {\n        throw new InvalidPatternError('A day of week mask is required for Weekly, MonthNth, and YearNth recurrence patterns.');\n      }\n      if (this.value.type === TYPE.MonthNth || this.value.type === TYPE.YearNth) {\n        if (dayOfWeekFromFlag(this.value.day_of_week_mask) % 1 !== 0) {\n          throw new InvalidPatternError('Only one day of week may be specified for MonthNth and YearNth recurrence patterns.');\n        }\n      }\n    } else {\n      this.value.day_of_week_mask = null;\n    }\n  }\n\n  _validateInterval() {\n    if (!this.value.interval) {\n      throw new InvalidPatternError('A recurrence interval is required.');\n    }\n    this.value.interval = Number(this.value.interval);\n    if (isNaN(this.value.interval) || this.value.interval <= 0) {\n      throw new InvalidPatternError('The recurrence interval must be a number greater than 0.');\n    }\n  }\n\n  _validateExceptions() {\n    this._exceptionsByDate = {};\n    this._exceptionsByOriginalDate = {};\n    this._moved = {};\n    this.value.exceptions = this.value.exceptions || [];\n\n    this._validated = true;\n    let exceptions = {};\n    try {\n      this.value.exceptions.forEach(exception => {\n        if (!this.matches(exception.original_date)) {\n          throw new InvalidPatternError('An exception exists for an invalid date \"' + exception.original_date + '\".');\n        }\n        if (exceptions[exception.original_date]) {\n          throw new InvalidPatternError('More than one exception exists for \"' + exception.original_date + '\".');\n        }\n        if (exception.date) {\n          if (\n            exception.date < this.value.start_date ||\n            !!this.value.end_date && exception.date > this.value.end_date\n          ) {\n            throw new InvalidPatternError('The exception for \"' + exception.original_date + '\" is outside the pattern period.');\n          }\n          if (exception.date !== exception.original_date && this.matches(exception.date)) {\n            throw new InvalidPatternError('The exception for \"' + exception.original_date + '\" cannot occur on the same date as a regular occurrence.\"');\n          }\n          if (exceptions[exception.original_date]) {\n            throw new InvalidPatternError('More than one exception exists for \"' + exception.original_date + '\".');\n          }\n          if (exception.date <= this.nextPatternDate(exception.original_date, -1)) {\n            throw new InvalidPatternError('The exception for \"' + exception.original_date + '\" must occur after the previous occurrence.');\n          }\n          if (exception.date >= this.nextPatternDate(exception.original_date, 1)) {\n            throw new InvalidPatternError('The exception for \"' + exception.original_date + '\" must occur before the next occurrence.');\n          }\n        }\n        exceptions[exception.original_date] = true;\n      });\n    } finally {\n      this._validated = false;\n    }\n\n    this.value.exceptions.forEach(exception => {\n      this._exceptionsByOriginalDate[exception.original_date] = exception;\n      if (exception.original_date !== exception.date) {\n        this._moved[exception.original_date] = true;\n      }\n      if (exception.date) {\n        this._exceptionsByDate[exception.date] = exception;\n      }\n    });\n  }\n\n  /**\n   * @private\n   * @param {String} date\n   * @returns {Boolean}\n   */\n  _doesOccurWithinPeriod(date) {\n    return (\n      date >= this.value.start_date &&\n      (!this.value.end_date || date <= this.value.end_date)\n    );\n  }\n\n  /**\n   * Gets the next valid occurrence starting from the specified date. A negative\n   * direction gets the previous occurrence rather than the next.\n   * @private\n   * @param {Date} start The date to start from.\n   * @param {Number} direction Must be 1 or -1.\n   * @returns {Date}\n   */\n  _getNextOccurrence(start, direction) {\n    let occurrence = this._snapToOccurrence(start, direction);\n    if (+occurrence !== +start) {\n      return occurrence;\n    }\n    return this._engine.next(occurrence, direction);\n  }\n\n  /**\n   * Gets the nearest valid occurrence to the specified date. If occurrences\n   * exist before and after the date, a positive direction returns the later\n   * occurrence whereas a negative direction returns the earlier occurrence.\n   * @private\n   * @param {Date} date The date to snap to.\n   * @param {Number} direction Must be 1 or -1.\n   * @returns {Date}\n   */\n  _snapToOccurrence(date, direction) {\n    return this._engine.snapToOccurrence(date, direction);\n  }\n};\n\n[\n  'January', 'February', 'March', 'April', 'May', 'June', 'July',\n  'August', 'September', 'October', 'November', 'December'\n].forEach(function(month, index) {\n  Pattern.prototype[month.toLowerCase()] = function(dayOfMonth) {\n    this._validated = false;\n    this.value.month_of_year = index + 1;\n    if (dayOfMonth) {\n      this.value.day_of_month = dayOfMonth;\n      this.value.instance = null;\n    }\n    return this;\n  };\n\n  Pattern.prototype['of' + month] = function(dayOfMonth) {\n    this._validated = false;\n    this.value.month_of_year = index + 1;\n    if (dayOfMonth) {\n      this.value.day_of_month = dayOfMonth;\n      this.value.instance = null;\n    }\n    return this;\n  };\n});\n",
    "import DAYS from './days';\nimport {\n  dayOfWeekMaskToArray,\n  durationToWeeks,\n  getDate,\n  getDayOfWeekFlag,\n  getSunday,\n  hasFlag,\n  plusDays,\n  plusWeeks,\n} from './util';\n\nexport default class WeeklyEngine {\n  constructor(pattern) {\n    this._interval = pattern.interval;\n    this._dayOfWeekMask = pattern.day_of_week_mask;\n    this._startDate = pattern.start_date;\n    this._endDate = pattern.end_date;\n  }\n\n  /**\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  snapToOccurrence(date, direction) {\n    while (!this._doesMatchDayOfWeek(date)) {\n      date = plusDays(date, direction);\n    }\n\n    let firstDay = getDate(this._startDate);\n    while (!this._doesMatchDayOfWeek(firstDay)) {\n      firstDay = plusDays(firstDay, 1);\n    }\n    if (date <= firstDay) {\n      return firstDay;\n    }\n\n    if (this._endDate) {\n      let lastDay = getDate(this._endDate);\n      while (!this._doesMatchDayOfWeek(lastDay)) {\n        lastDay = plusDays(lastDay, -1);\n      }\n      if (date >= lastDay) {\n        return lastDay;\n      }\n    }\n\n    let remainder = durationToWeeks(getSunday(date) - getSunday(firstDay)) % this._interval;\n    if (remainder > 0) {\n      date = plusWeeks(date, remainder * direction);\n      let maskDays = dayOfWeekMaskToArray(this._dayOfWeekMask);\n      if (direction > 0) {\n        // Starting from Sunday, get the first valid date going forward from\n        // Sunday to Saturday.\n        return plusDays(getSunday(date), maskDays[0]);\n      } else {\n        // Starting from next Sunday, get the first valid date going backward\n        // from Saturday to Sunday.\n        return plusDays(getSunday(plusWeeks(date, 1)), -(7 - maskDays[maskDays.length - 1]));\n      }\n    } else {\n      return date;\n    }\n  }\n\n  /**\n   * @param {Date} occurrence\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  next(occurrence, direction) {\n    do {\n      occurrence = plusDays(occurrence, direction);\n      // If it's Sunday, jump to the next valid week. If the interval is 1,\n      // then we're already there.\n      if (getDayOfWeekFlag(occurrence) === DAYS.Sunday) {\n        occurrence = plusWeeks(occurrence, (this._interval - 1) * direction);\n      }\n    } while (!this._doesMatchDayOfWeek(occurrence));\n    return occurrence;\n  }\n\n  /**\n   * Gets a value indicating whether the date falls on the pattern interval.\n   * @param {Date} date\n   * @returns {Boolean}\n   */\n  matchesInterval(date) {\n    return (\n      this._doesMatchDayOfWeek(date) &&\n      this._doesMatchWeeklyInterval(date)\n    );\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @returns {Boolean}\n   */\n  _doesMatchDayOfWeek(date) {\n    return hasFlag(this._dayOfWeekMask, getDayOfWeekFlag(date));\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @returns {Boolean}\n   */\n  _doesMatchWeeklyInterval(date) {\n    let start = getSunday(getDate(this._startDate));\n    let end = getSunday(date);\n    let weeks = durationToWeeks(end - start);\n    return weeks % this._interval === 0;\n  }\n};\n",
    "import {\n  dayOfWeekFromFlag,\n  getDayOfWeek,\n  getInstance,\n  getMonth,\n  getYearsBetween,\n  resolveInstanceDate,\n} from './util';\n\nimport MonthEngine from './MonthEngine';\n\nexport default class YearNthEngine {\n  constructor(pattern) {\n    this._dayOfWeek = dayOfWeekFromFlag(pattern.day_of_week_mask);\n    this._instance = pattern.instance;\n    this._interval = pattern.interval;\n    this._month = pattern.month_of_year;\n    this._engine = new MonthEngine({\n      start: pattern.start_date,\n      end: pattern.end_date,\n      interval: pattern.interval * 12,\n      resolve: year => resolveInstanceDate(year, pattern.month_of_year, pattern.instance, this._dayOfWeek)\n    });\n  }\n\n  snapToOccurrence(date, direction) {\n    return this._engine.snapToOccurrence(date, direction);\n  }\n\n  next(occurrence, direction) {\n    return this._engine.next(occurrence, direction);\n  }\n\n  matchesInterval(date) {\n    return (\n      getDayOfWeek(date) === this._dayOfWeek &&\n      getInstance(date) === this._instance &&\n      getMonth(date) === this._month &&\n      getYearsBetween(date, this._engine.firstOccurrence) % this._interval === 0\n    );\n  }\n};\n",
    "import {\n  getMonth,\n  getYear,\n  getYearsBetween,\n  resolveDate,\n} from './util';\n\nimport MonthEngine from './MonthEngine';\n\nexport default class YearlyEngine {\n  constructor(pattern) {\n    this._day = pattern.day_of_month;\n    this._month = pattern.month_of_year;\n    this._interval = pattern.interval;\n    this._engine = new MonthEngine({\n      start: pattern.start_date,\n      end: pattern.end_date,\n      interval: pattern.interval * 12,\n      resolve: year => resolveDate(year, pattern.month_of_year, pattern.day_of_month)\n    });\n  }\n\n  snapToOccurrence(date, direction) {\n    return this._engine.snapToOccurrence(date, direction);\n  }\n\n  next(occurrence, direction) {\n    return this._engine.next(occurrence, direction);\n  }\n\n  matchesInterval(date) {\n    return (\n      +resolveDate(getYear(date), getMonth(date), this._day) === +date &&\n      getMonth(date) === this._month &&\n      getYearsBetween(this._engine.firstOccurrence, date) % this._interval === 0\n    );\n  }\n};\n",
    "/**\n * @enum {Number}\n * Days of the week.\n */\nexport default {\n  Sunday: 1,\n  Monday: 2,\n  Tuesday: 4,\n  Wednesday: 8,\n  Thursday: 16,\n  Friday: 32,\n  Saturday: 64,\n  All: 1 | 2 | 4 | 8 | 16 | 32 | 64,\n  Weekdays: 2 | 4 | 8 | 16 | 32,\n  Weekends: 1 | 64\n};\n",
    "export default class InvalidDateError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'InvalidDateError';\n    this.message = message;\n  }\n};\n",
    "export default class InvalidMaskError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'InvalidMaskError';\n    this.message = message;\n  }\n};\n",
    "export default class InvalidOperationError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'InvalidOperationError';\n    this.message = message;\n  }\n};\n",
    "export default class InvalidPatternError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'InvalidPatternError';\n    this.message = message;\n  }\n};\n",
    "import Pattern from './Pattern';\nimport Mask from './Mask';\nimport days from './days';\nimport type from './type';\n\nimport InvalidDateError from './errors/InvalidDateError';\nimport InvalidMaskError from './errors/InvalidMaskError';\nimport InvalidOperationError from './errors/InvalidOperationError';\nimport InvalidPatternError from './errors/InvalidPatternError';\n\nvar exports = function() {\n  return new Pattern();\n};\n\nexports.Pattern = Pattern;\nexports.Mask = Mask;\nexports.days = days;\nexports.type = type;\n\nexports.errors = {\n  InvalidDateError,\n  InvalidMaskError,\n  InvalidOperationError,\n  InvalidPatternError,\n};\n\nexport default exports;\n",
    "/**\n * @enum {Number}\n * Recurrence types.\n */\nexport default {\n  Daily: 1,\n  Weekly: 2,\n  Monthly: 3,\n  MonthNth: 4,\n  Yearly: 5,\n  YearNth: 6\n};\n",
    "import InvalidDateError from './errors/InvalidDateError';\n\nconst DATE_PATTERN = /[0-9]{4}\\-[0-9]{2}\\-[0-9]{2}/;\n\n/**\n * @param {String} date\n * @returns {Date}\n */\nexport function getDate(date) {\n  if (!DATE_PATTERN.test(date)) {\n    throw new InvalidDateError('Date \"' + date + '\" is invalid. Expected format to be YYYY-MM-DD.');\n  }\n  let result = new Date(date + 'T00:00:00.000Z');\n  if (isNaN(result.getTime())) {\n    throw new InvalidDateError('Date \"' + date + '\" is invalid.');\n  }\n  return result;\n};\n\n/**\n * Creates a date object from the specified year/month/day.\n * @param {Number} year\n * @param {Number} month\n * @param {Number} day\n * @returns {Date}\n */\nexport function getDateFromParts(year, month, day) {\n  return getDate(`${year}-${padZero(month)}-${padZero(day)}`);\n};\n\n/**\n * Creates a date object from the specified year/month/day. If day is too high,\n * the last day of the month is used.\n * @param {Number} year\n * @param {Number} month [1-12]\n * @param {Number} day [1-31]\n * @returns {Date}\n */\nexport function resolveDate(year, month, day) {\n  let daysInMonth = getDaysInMonth(getDateFromParts(year, month, 1));\n  return getDateFromParts(year, month, Math.min(day, daysInMonth));\n};\n\nexport function getInstance(date) {\n  return Math.ceil(getDayOfMonth(date) / 7);\n};\n\n/**\n * @param {Number} year\n * @param {Number} month\n * @param {Number} instance [1-5]\n * @param {Number} dayOfWeek [0-6]\n * @returns {Date}\n */\nexport function resolveInstanceDate(year, month, instance, dayOfWeek) {\n  let day0 = getDateFromParts(year, month, 1);\n  let dow0 = getDayOfWeek(day0);\n  if (dayOfWeek < dow0) {\n    dayOfWeek += 7;\n  }\n  let firstInstance = 1 + dayOfWeek - dow0;\n  let day = firstInstance + (instance - 1) * 7;\n  let daysInMonth = getDaysInMonth(day0);\n  if (day > daysInMonth) {\n    day -= 7;\n  }\n  return getDateFromParts(year, month, day);\n};\n\n/**\n * @param {String} date\n */\nexport function validateDate(date) {\n  getDate(date);\n};\n\n/**\n * @param {Date} date\n * @returns {String}\n */\nexport function getString(date) {\n  let month = padZero(getMonth(date));\n  let day = padZero(getDayOfMonth(date));\n  return date.getUTCFullYear() + '-' + month + '-' + day;\n};\n\nexport function padZero(value) {\n  value = value.toString();\n  if (value.length === 1) {\n    value = '0' + value;\n  }\n  return value;\n};\n\nexport function getMonth(date) {\n  return date.getUTCMonth() + 1;\n};\n\nexport function getDayOfMonth(date) {\n  return date.getUTCDate();\n};\n\nexport function getYear(date) {\n  return date.getUTCFullYear();\n};\n\nexport function getDaysInMonth(date) {\n  let year = getYear(date);\n  let month = getMonth(date) + 1;\n  if (month > 12) {\n    month = 1;\n    year += 1;\n  }\n  date = getDate(`${year}-${padZero(month)}-01`);\n  date = plusDays(date, -1);\n  return getDayOfMonth(date);\n};\n\nexport function getFirstDayOfMonth(date) {\n  let [year, month, day] = getString(date).split('-');\n  return getDate(`${year}-${month}-01`);\n};\n\n/**\n * 0-6 Sunday-Saturday.\n * @param {Date} date\n * @returns {Number}\n */\nexport function getDayOfWeek(date) {\n  return date.getUTCDay();\n};\n\n/**\n * @param {Date} date\n * @returns {Number}\n */\nexport function getDayOfWeekFlag(date) {\n  return dayOfWeekToFlag(getDayOfWeek(date));\n};\n\n/**\n * @param {Number} day\n * @returns {Number}\n */\nexport function dayOfWeekToFlag(day) {\n  return Math.pow(2, day);\n};\n\n/**\n * @param {Number} flag\n * @returns {Number}\n */\nexport function dayOfWeekFromFlag(flag) {\n  return Math.log(flag) / Math.log(2);\n};\n\n/**\n * @param {Date} date\n * @returns {Date}\n */\nexport function getSunday(date) {\n  return plusDays(date, -getDayOfWeek(date));\n};\n\n/**\n * Determines whether a given bit mask contains the specified bit flag.\n * @param {Number} mask\n * @param {Number} flag\n * @returns {Boolean}\n */\nexport function hasFlag(mask, flag) {\n  return (mask & flag) === flag;\n};\n\n/**\n * Converts a JavaScript date value to days.\n * @param {Number} value\n *   The number of milliseconds since midnight of Jan 1, 1970 UTC.\n * @returns {Number}\n */\nexport function durationToDays(duration) {\n  return (+duration) / 1000 / 60 / 60 / 24;\n};\n\n/**\n * @param {Number} duration\n * @returns {Number}\n */\nexport function durationToWeeks(duration) {\n  return durationToDays(duration) / 7;\n};\n\nexport function getMonthsBetween(start, end) {\n  if (start > end) {\n    let temp = end;\n    end = start;\n    start = temp;\n  }\n  let startYear = getYear(start);\n  let startMonth = getMonth(start);\n  let endYear = getYear(end);\n  let endMonth = getMonth(end);\n  let years = endYear - startYear;\n  let months = 0;\n  if (endMonth > startMonth) {\n    months = endMonth - startMonth;\n  } else if (endMonth < startMonth) {\n    months = startMonth - endMonth;\n    years -= 1;\n  }\n  months += years * 12;\n  return months;\n};\n\nexport function getYearsBetween(start, end) {\n  return Math.abs(getYear(end) - getYear(start));\n};\n\n/**\n * @param {Number} days\n * @returns {Number}\n */\nexport function daysToDuration(days) {\n  return days * 24 * 60 * 60 * 1000;\n};\n\n/**\n * @param {Date} date\n * @param {Number} days\n * @returns {Date}\n */\nexport function plusDays(date, days) {\n  return new Date(+date + daysToDuration(days));\n};\n\n/**\n * @param {Date} date\n * @param {Number} weeks\n * @returns {Date}\n */\nexport function plusWeeks(date, weeks) {\n  return plusDays(date, weeks * 7);\n};\n\n/**\n * @param {Number} mask\n * @returns {Array.<Number>}\n */\nexport function dayOfWeekMaskToArray(mask) {\n  let days = [0, 1, 2, 3, 4, 5, 6];\n  let result = [];\n  days.forEach(function(day) {\n    if (hasFlag(mask, dayOfWeekToFlag(day))) {\n      result.push(day);\n    }\n  });\n  return result;\n};\n\nexport function normalizeDirection(direction) {\n  return direction < 0 ? -1 : 1;\n};\n\nexport function find(array, callback) {\n  let index = findIndex(array, callback);\n  if (index > -1) {\n    return array[index];\n  } else {\n    return null;\n  }\n};\n\nexport function findIndex(array, callback) {\n  for (let i = 0; i < array.length; i++) {\n    if (callback(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nexport function repeat(string, times) {\n  let ret = '';\n  for (let i = 0; i < times; i++) {\n    ret += string;\n  }\n  return ret;\n};\n"
  ]
}