{
  "version": 3,
  "sources": [
    "../arceus/node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/Mask.js",
    "src/Pattern.js",
    "src/days.js",
    "src/errors/src/InvalidDateError.js",
    "src/errors/src/InvalidMaskError.js",
    "src/errors/src/InvalidOperationError.js",
    "src/errors/src/InvalidPatternError.js",
    "src/errors/src/NotSupportedError.js",
    "src/index.js",
    "src/type.js",
    "src/util.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import InvalidMaskError from './errors/InvalidMaskError';\nimport {\n  durationToDays,\n  getDate,\n  getString,\n  plusDays,\n  repeat,\n  validateDate\n} from './util';\n\nexport default class Mask {\n  /**\n   * A mask contains a start date and a series of 1s and 0s where a 1 represents\n   * an occurrence. A mask always starts and ends with a 1. It may also contain a\n   * single 1 if there is only one occurrence.\n   * @param {String} mask\n   */\n  constructor(mask) {\n    this.value = mask || '';\n    this.start_date = null;\n\n    if (this.value) {\n      var parts = this.value.split('|');\n      if (parts.length !== 2) {\n        throw new InvalidMaskError('Mask is invalid. Expected format [yyyy-mm-dd]|[mask] but found \"' + this.value + '\".');\n      }\n      validateDate(parts[0]);\n      this.start_date = parts[0];\n      if (parts[1][0] !== '1') {\n        throw new InvalidMaskError('Mask format is invalid. Mask value should begin with a \"1\".');\n      }\n      if (parts[1][parts[1].length - 1] !== '1') {\n        throw new InvalidMaskError('Mask format is invalid. Mask value should end with a \"1\".');\n      }\n    }\n  }\n\n  toJSON() {\n    return this.toString();\n  }\n\n  toString() {\n    return this.value;\n  }\n\n  /**\n   * @param {Mask|String} mask\n   * @returns {Mask}\n   */\n  or(mask) {\n    return this._op(mask, (a, b) => {\n      return Boolean(Number(a)) | Boolean(Number(b));\n    });\n  }\n\n  /**\n   * @param {Mask|String} mask\n   * @returns {Mask}\n   */\n  and(mask) {\n    return this._op(mask, (a, b) => {\n      return Boolean(Number(a)) & Boolean(Number(b));\n    });\n  }\n\n  /**\n   * @param {Mask|String} mask\n   * @returns {Mask}\n   */\n  xor(mask) {\n    return this._op(mask, (a, b) => {\n      return Boolean(Number(a)) ^ Boolean(Number(b));\n    });\n  }\n\n  /**\n   * @param {Mask|String} mask\n   * @returns {Mask}\n   */\n  not(mask) {\n    return this._op(mask, (a, b) => {\n      if (Boolean(Number(b))) {\n        return 0;\n      } else {\n        return Number(Boolean(Number(a)));\n      }\n    });\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Boolean}\n   */\n  matches(date) {\n    if (!this.value) {\n      return false;\n    }\n    var values = this.value.split('|');\n    var start = values[0];\n    if (date < start) {\n      return false;\n    }\n    var index = durationToDays(getDate(date) - getDate(start));\n    return values[1][index] === '1';\n  }\n\n  /**\n   * @returns {Array.<String>}\n   */\n  getDates() {\n    if (!this.value) {\n      return [];\n    }\n    var dates = [];\n    var values = this.value.split('|');\n    var start = values[0];\n    dates.push(start);\n    start = getDate(start);\n    var days = values[1].split('');\n    var length = days.length;\n    for (var i = 1; i < length; i++) {\n      if (days[i] === '1') {\n        dates.push(getString(plusDays(start, i)));\n      }\n    }\n    return dates;\n  }\n\n  /**\n   * @returns {Array.<String>|null}\n   */\n  getRange() {\n    if (!this.value) {\n      return null;\n    }\n    var values = this.value.split('|');\n    var start = getDate(values[0]);\n    var end = plusDays(start, values[1].length - 1);\n    return [getString(start), getString(end)];\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Mask}\n   */\n  addDate(date) {\n    return this.or(date + '|1');\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Mask}\n   */\n  removeDate(date) {\n    return this.not(date + '|1');\n  }\n\n  /**\n   * @param {String} date\n   * @param {Boolean} [state]\n   * @returns {Mask}\n   */\n  toggleDate(date, state) {\n    if (state === undefined) {\n      if (this.matches(date)) {\n        return this.removeDate(date);\n      } else {\n        return this.addDate(date);\n      }\n    } else {\n      if (state) {\n        return this.addDate(date);\n      } else {\n        return this.removeDate(date);\n      }\n    }\n  }\n\n  _op(mask, op) {\n    var masks = Mask.commonalize(this.value, mask);\n    if (!masks[0]) {\n      return new Mask();\n    }\n    var a = masks[0].split('|')[1].split('');\n    var b = masks[1].split('|')[1].split('');\n    var result = [];\n    var length = a.length;\n    for (var i = 0; i < length; i++) {\n      result[i] = op(a[i], b[i]);\n    }\n    return new Mask(Mask.trim(masks[0].split('|')[0] + '|' + result.join('')), false);\n  };\n\n  /**\n   * @param {Array.<String>} dates\n   * @returns {Mask}\n   */\n  static fromDates(dates) {\n    if (!dates || !dates.length) {\n      return new Mask();\n    }\n    dates = dates.slice().sort();\n    var start = dates[0];\n    var mask = '1';\n    var length = dates.length;\n    for (var i = 1; i < length; i++) {\n      mask += repeat('0', durationToDays(getDate(dates[i]) - getDate(dates[i - 1])) - 1);\n      mask += '1';\n    }\n    return new Mask(start + '|' + mask);\n  }\n\n  /**\n   * Trims the mask. Any leading and trailing zeros are removed, and the start\n   * date is updated accordingly.\n   * @param {String} mask\n   * @returns {String}\n   */\n  static trim(mask) {\n    if (!mask || mask.indexOf('1') === -1) {\n      return '';\n    } else {\n      var parts = mask.split('|');\n      var start = parts[0];\n      var value = parts[1];\n      if (value.indexOf('1') === -1) {\n        return '';\n      } else if (value[0] === '1' && value[value.length - 1] === '1') {\n        return mask;\n      } else {\n        start = getString(plusDays(getDate(start), value.indexOf('1')));\n        value = value.substring(value.indexOf('1'), value.lastIndexOf('1') + 1);\n        return start + '|' + value;\n      }\n    }\n  }\n\n  /**\n   * Takes two masks and returns two new masks with the same start and end dates\n   * Note that these masks are potentially invalid since they are untrimmed. To\n   * trim them, use Mask.trim().\n   * @param {Mask|String} maskA\n   * @param {Mask|String} maskB\n   * @returns {Array.<String>}\n   */\n  static commonalize(maskA, maskB) {\n    maskA = maskA && maskA.toString();\n    maskB = maskB && maskB.toString();\n    var a = !!maskA && maskA.split('|');\n    var b = !!maskB && maskB.split('|');\n    if (!a && !b) {\n      return ['', ''];\n    }\n    if (!a) {\n      a = [b[0], repeat('0', b[1].length)];\n    } else if ( !b ) {\n      b = [a[0], repeat('0', a[1].length)];\n    }\n    var diff;\n    if (a[0] < b[0]) {\n      diff = durationToDays(getDate(b[0]) - getDate(a[0]));\n      a[1] += repeat('0', diff);\n      b[1] = repeat('0', diff) + b[1];\n      b[0] = a[0];\n    } else if (b[0] < a[0]) {\n      diff = durationToDays(getDate(a[0]) - getDate(b[0]));\n      b[1] += repeat('0', diff);\n      a[1] = repeat('0', diff) + a[1];\n      a[0] = b[0];\n    }\n    if (a[1].length < b[1].length) {\n      a[1] += repeat('0', b[1].length - a[1].length);\n    }\n    if (b[1].length < a[1].length) {\n      b[1] += repeat('0', a[1].length - b[1].length);\n    }\n    return [a.join('|'), b.join('|')];\n  }\n};\n",
    "import DAYS from './days';\nimport TYPE from './type';\nimport {\n  dayOfWeekMaskToArray,\n  durationToDays,\n  durationToWeeks,\n  extend,\n  find,\n  findIndex,\n  getDate,\n  getDayOfWeekFlag,\n  getString,\n  getSunday,\n  hasFlag,\n  normalizeDirection,\n  plusDays,\n  plusWeeks,\n  repeat,\n  validateDate\n} from './util';\nimport InvalidPatternError from './errors/InvalidPatternError';\nimport InvalidOperationError from './errors/InvalidOperationError';\nimport NotSupportedError from './errors/NotSupportedError';\nimport Mask from './Mask';\n\nexport default class Pattern {\n  /**\n   * @param {PatternJson} [pattern]\n   */\n  constructor(pattern) {\n    this.value = extend({\n      start_date: null,\n      end_date: null,\n      type: null,\n      day_of_week_mask: null,\n      day_of_month: null,\n      month_of_year: null,\n      interval: null,\n      instance: null,\n      exceptions: []\n    }, pattern );\n    this._validated = false;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  validate() {\n    if (this._validated) {\n      return this;\n    }\n    this._validatePeriod();\n    this._validateType();\n    this._validateDayOfWeekMask();\n    this._validateInterval();\n    this._validateExceptions();\n    this._validated = true;\n    return this;\n  }\n\n  /**\n   * @param {Number} interval\n   * @returns {Pattern}\n   */\n  every(interval) {\n    this._validated = false;\n    this.value.interval = interval || 1;\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  day() {\n    this._validated = false;\n    this.value.type = TYPE.Daily;\n    this.value.day_of_week_mask = null;\n    this.value.instance = null;\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  days() {\n    return this.day();\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  week() {\n    this._validated = false;\n    this.value.type = TYPE.Weekly;\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  weeks() {\n    return this.week();\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  month() {\n    this._validated = false;\n    if (this.value.instance) {\n      this.value.type = TYPE.MonthNth;\n    } else {\n      this.value.type = TYPE.Monthly;\n      this.value.day_of_week_mask = null;\n    }\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  months() {\n    return this.month();\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  year() {\n    this._validated = false;\n    if (this.value.instance) {\n      this.value.type = TYPE.YearNth;\n    } else {\n      this.value.type = TYPE.Yearly;\n      this.value.day_of_week_mask = null;\n    }\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  years() {\n    return this.year();\n  }\n\n  /**\n   * @param {Number} dayOfWeekMask\n   * @returns {Pattern}\n   */\n  on(dayOfWeekMask) {\n    this._validated = false;\n    this.value.day_of_week_mask = dayOfWeekMask;\n    this.value.instance = null;\n    return this;\n  }\n\n  /**\n   * @param {Number} instance\n   * @param {Number} dayOfWeek\n   * @returns {Pattern}\n   */\n  the(instance, dayOfWeek) {\n    this._validated = false;\n    this.value.instance = instance;\n    this.value.day_of_week_mask = dayOfWeek;\n    return this;\n  }\n\n  /**\n   * @param {Number} dayOfMonth\n   * @returns {Pattern}\n   */\n  dayOfMonth(dayOfMonth) {\n    this._validated = false;\n    this.value.instance = null;\n    this.value.day_of_month = dayOfMonth;\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Pattern}\n   */\n  from(date) {\n    this._validated = false;\n    this.value.start_date = date;\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Pattern}\n   */\n  to(date) {\n    this._validated = false;\n    this.value.end_date = date;\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @param {String} newDate\n   * @returns {Pattern}\n   */\n  addException(date, newDate) {\n    this._validated = false;\n    var exception = find(this.value.exceptions, function(exception) {\n      return exception.original_date === date;\n    });\n    if (!exception) {\n      exception = {};\n      this.value.exceptions.push(exception);\n    }\n    exception.original_date = date;\n    exception.date = newDate;\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Pattern}\n   */\n  removeException(date) {\n    this._validated = false;\n    var index = findIndex(this.value.exceptions, function(exception) {\n      return exception.original_date === date;\n    });\n    if (index > -1) {\n      this.value.exceptions.splice(index, 1);\n    }\n    return this;\n  }\n\n  /**\n   * @returns {Pattern}\n   */\n  removeAllExceptions() {\n    this._validated = false;\n    this.value.exceptions = [];\n    return this;\n  }\n\n  /**\n   * @param {String} date\n   * @returns {Pattern}\n   */\n  findException(date) {\n    return find(this.value.exceptions, function(exception) {\n      return exception.original_date === date;\n    });\n  }\n\n  /**\n   * Determines whether the specified date occurs in the recurrence pattern.\n   * @param {String} date\n   * @returns {Boolean}\n   */\n  matches(date) {\n    this.validate();\n    if (this._exceptionsByDate[date]) {\n      return true;\n    }\n    if (this._moved[date]) {\n      return false;\n    }\n    if (!this._doesOccurWithinPeriod(date)) {\n      return false;\n    }\n    switch (this.value.type) {\n      case TYPE.Daily:\n        return this._doesMatchDailyInterval(getDate(date));\n      case TYPE.Weekly:\n        return (\n          this._doesMatchDayOfWeek(getDate(date)) &&\n          this._doesMatchWeeklyInterval(getDate(date))\n        );\n      default:\n        return false;\n    }\n  }\n\n  /**\n   * Gets the recurrence pattern as a plain old JSON object.\n   * @returns {PatternJson}\n   */\n  toJSON() {\n    return this.value;\n  }\n\n  /**\n   * @param {String} [end]\n   * @returns {Mask}\n   */\n  toMask(end) {\n    end = end || this.value.end_date;\n    if (!end) {\n      throw new InvalidOperationError('An end date is required to generate a mask.');\n    }\n    var mask = '';\n    var last, next;\n    while (next = this.next(last)) {\n      if (next > end) {\n        break;\n      }\n      var days = durationToDays(getDate(next) - getDate(last || this.value.start_date));\n      if (last) {\n        days -= 1;\n      }\n      mask += repeat('0', days);\n      mask += '1';\n      last = next;\n    }\n    if (mask) {\n      return new Mask(Mask.trim(this.value.start_date + '|' + mask));\n    } else {\n      return new Mask();\n    }\n  };\n\n  /**\n   * Gets the next occurrence or exception in the recurrence pattern after the\n   * specified date or returns false if there are no more occurrences.\n   * @param {String} [start] The date to search from.\n   * @param {Number} [direction]\n   *   A value indicating direction. Positive goes forward, negative goes backward.\n   * @returns {String|Boolean}\n   */\n  next(start, direction) {\n    this.validate();\n    if (typeof start !== \"string\") {\n      direction = start;\n      start = getString(plusDays(getDate(this.value.start_date), -1));\n    }\n    var date = start;\n    while (true) {\n      date = getString(this._getNextOccurrence(getDate(date), normalizeDirection(direction)));\n      if (this._doesOccurWithinPeriod(date)) {\n        // See if there's an exception for this date.\n        var exception = this._exceptionsByOriginalDate[date];\n        if (exception) {\n          if (exception.date) {\n            return date;\n          } else {\n            // This occurence was deleted. Get the next one.\n          }\n        } else {\n          return date;\n        }\n      } else {\n        // We're outside the range of the recurrence pattern.\n        return false;\n      }\n    }\n  }\n\n  /**\n   * Gets the next date in the recurrence pattern after the specified date\n   * or returns false if there are no more occurrences.\n   * @param {String} start The date to search from.\n   * @param {Number} [direction]\n   *   A value indicating direction. Positive goes forward, negative goes backward.\n   * @returns {String|Boolean}\n   */\n  nextPatternDate(start, direction) {\n    this.validate();\n    var date = getString(this._getNextOccurrence(getDate(start), normalizeDirection(direction)));\n    if (this._doesOccurWithinPeriod(date)) {\n      return date;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Gets the next occurrence, or returns the specified date if it's valid.\n   * @param {String} date\n   * @param {Number} [direction]\n   *   A value indicating direction. Positive goes forward, negative goes backward.\n   * @returns {String|Boolean}\n   */\n  snap(date, direction) {\n    this.validate();\n    return getString(this._snapToOccurrence(getDate(date), normalizeDirection(direction)));\n  }\n\n  _validatePeriod() {\n    if (!this.value.start_date) {\n      throw new InvalidPatternError('A start date is required.');\n    }\n    this.value.start_date = String(this.value.start_date);\n    validateDate(this.value.start_date);\n    if (this.value.end_date) {\n      this.value.end_date = String(this.value.end_date);\n      validateDate(this.value.end_date);\n      if (this.value.start_date > this.value.end_date) {\n        throw new InvalidPatternError('The end date must be greater than or equal to the start date');\n      }\n    }\n  }\n\n  _validateType() {\n    if (!this.value.type) {\n      throw new InvalidPatternError('A recurrence type is required.');\n    }\n    this.value.type = Number(this.value.type);\n    switch (this.value.type) {\n      case TYPE.Daily:\n      case TYPE.Weekly:\n        break;\n\n      case TYPE.Monthly:\n      case TYPE.MonthNth:\n      case TYPE.Yearly:\n      case TYPE.YearNth:\n        throw new NotSupportedError('\"Daily\" and \"Weekly\" are the only recurrence types supported at this time.');\n\n      default:\n        throw new InvalidPatternError('The recurrence type \"' + this.value.type + '\" is invalid.');\n    }\n  }\n\n  _validateDayOfWeekMask() {\n    if (this.value.type === TYPE.Weekly) {\n      if (!this.value.day_of_week_mask) {\n        throw new InvalidPatternError('A day-of-week mask is required for weekly recurrence patterns.');\n      }\n    } else {\n      this.value.day_of_week_mask = null;\n    }\n  }\n\n  _validateInterval() {\n    if (!this.value.interval) {\n      throw new InvalidPatternError('A recurrence interval is required.');\n    }\n    this.value.interval = Number(this.value.interval);\n    if (isNaN(this.value.interval) || this.value.interval <= 0) {\n      throw new InvalidPatternError('The recurrence interval must be a number greater than 0.');\n    }\n  }\n\n  _validateExceptions() {\n    var self = this;\n    this._exceptionsByDate = {};\n    this._exceptionsByOriginalDate = {};\n    this._moved = {};\n    this.value.exceptions = this.value.exceptions || [];\n\n    this._validated = true;\n    var exceptions = {};\n    try {\n      this.value.exceptions.forEach(function(exception) {\n        if (!self.matches(exception.original_date)) {\n          throw new InvalidPatternError('An exception exists for an invalid date \"' + exception.original_date + '\".');\n        }\n        if (exceptions[exception.original_date]) {\n          throw new InvalidPatternError('More than one exception exists for \"' + exception.original_date + '\".');\n        }\n        if (exception.date) {\n          if (\n            exception.date < self.value.start_date ||\n            !!self.value.end_date && exception.date > self.value.end_date\n          ) {\n            throw new InvalidPatternError('The exception for \"' + exception.original_date + '\" is outside the pattern period.');\n          }\n          if (exception.date !== exception.original_date && self.matches(exception.date)) {\n            throw new InvalidPatternError('The exception for \"' + exception.original_date + '\" cannot occur on the same date as a regular occurrence.\"');\n          }\n          if (exceptions[exception.original_date]) {\n            throw new InvalidPatternError('More than one exception exists for \"' + exception.original_date + '\".');\n          }\n          if (exception.date <= self.nextPatternDate(exception.original_date, -1)) {\n            throw new InvalidPatternError('The exception for \"' + exception.original_date + '\" must occur after the previous occurrence.');\n          }\n          if (exception.date >= self.nextPatternDate(exception.original_date, 1)) {\n            throw new InvalidPatternError('The exception for \"' + exception.original_date + '\" must occur before the next occurrence.');\n          }\n        }\n        exceptions[exception.original_date] = true;\n      });\n    } finally {\n      this._validated = false;\n    }\n\n    this.value.exceptions.forEach(function(exception) {\n      self._exceptionsByOriginalDate[exception.original_date] = exception;\n      if (exception.original_date !== exception.date) {\n        self._moved[exception.original_date] = true;\n      }\n      if (exception.date) {\n        self._exceptionsByDate[exception.date] = exception;\n      }\n    });\n  }\n\n  /**\n   * @private\n   * @param {String} date\n   * @returns {Boolean}\n   */\n  _doesOccurWithinPeriod(date) {\n    return (\n      date >= this.value.start_date &&\n      (!this.value.end_date || date <= this.value.end_date)\n    );\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @returns {Boolean}\n   */\n  _doesMatchDayOfWeek(date) {\n    return hasFlag(this.value.day_of_week_mask, getDayOfWeekFlag(date));\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @returns {Boolean}\n   */\n  _doesMatchDailyInterval(date) {\n    var days = durationToDays(date - getDate(this.value.start_date));\n    return days % this.value.interval === 0;\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @returns {Boolean}\n   */\n  _doesMatchWeeklyInterval(date) {\n    var start = getSunday(getDate(this.value.start_date));\n    var end = getSunday(date);\n    var weeks = durationToWeeks(end - start);\n    return weeks % this.value.interval === 0;\n  }\n\n  /**\n   * @private\n   * @param {Date} start The date to start from.\n   * @param {Number} direction A distance multiplier. Must be 1 or -1.\n   * @returns {Date}\n   */\n  _getNextOccurrence(start, direction) {\n    var date = this._snapToOccurrence(start, direction);\n    if (+date !== +start) {\n      return date;\n    }\n    switch (this.value.type) {\n      case TYPE.Daily:\n        return this._getNextDailyOccurrence(date, direction);\n      case TYPE.Weekly:\n        return this._getNextWeeklyOccurrence(date, direction);\n    }\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  _getNextDailyOccurrence(date, direction) {\n    return plusDays(date, this.value.interval * direction);\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  _getNextWeeklyOccurrence(date, direction) {\n    do {\n      date = plusDays(date, direction);\n      // If it's Sunday, jump to the next valid week. If the interval is 1,\n      // then we're already there.\n      if (getDayOfWeekFlag(date) === DAYS.Sunday) {\n        date = plusWeeks(date, (this.value.interval - 1) * direction);\n      }\n    } while (!this._doesMatchDayOfWeek(date));\n    return date;\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  _snapToOccurrence(date, direction) {\n    if (direction > 0) {\n      var patternStart = getDate(this.value.start_date);\n      if (date < patternStart) {\n        date = patternStart;\n      }\n    } else if (this.value.end_date) {\n      var patternEnd = getDate(this.value.end_date);\n      if (date > patternEnd) {\n        date = patternEnd;\n      }\n    }\n    switch (this.value.type) {\n      case TYPE.Daily:\n        return this._snapToDailyOccurrence(date, direction);\n      case TYPE.Weekly:\n        return this._snapToWeeklyOccurrence(date, direction);\n    }\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  _snapToDailyOccurrence(date, direction) {\n    var start = getDate(this.value.start_date);\n    var remainder = durationToDays(date - start) % this.value.interval;\n    return plusDays(date, remainder * direction);\n  }\n\n  /**\n   * @private\n   * @param {Date} date\n   * @param {Number} direction\n   * @returns {Date}\n   */\n  _snapToWeeklyOccurrence(date, direction) {\n    while (!this._doesMatchDayOfWeek(date)) {\n      date = plusDays(date, direction);\n    }\n\n    var firstDay = getDate(this.value.start_date);\n    while (!this._doesMatchDayOfWeek(firstDay)) {\n      firstDay = plusDays(firstDay, 1);\n    }\n    if (date <= firstDay) {\n      return firstDay;\n    }\n\n    if (this.value.end_date) {\n      var lastDay = getDate(this.value.end_date);\n      while (!this._doesMatchDayOfWeek(lastDay)) {\n        lastDay = plusDays(lastDay, -1);\n      }\n      if (date >= lastDay) {\n        return lastDay;\n      }\n    }\n\n    var remainder = durationToWeeks(getSunday(date) - getSunday(firstDay)) % this.value.interval;\n    if (remainder > 0) {\n      date = plusWeeks(date, remainder * direction);\n      var maskDays = dayOfWeekMaskToArray(this.value.day_of_week_mask);\n      if (direction > 0) {\n        // Starting from Sunday, get the first valid date going forward from\n        // Sunday to Saturday.\n        return plusDays(getSunday(date), maskDays[0]);\n      } else {\n        // Starting from next Sunday, get the first valid date going backward\n        // from Saturday to Sunday.\n        return plusDays(getSunday(plusWeeks(date, 1)), -(7 - maskDays[maskDays.length - 1]));\n      }\n    } else {\n      return date;\n    }\n  }\n};\n\n[\n  'January', 'February', 'March', 'April', 'May', 'June', 'July',\n  'August', 'September', 'October', 'November', 'December'\n].forEach(function(month, index) {\n  Pattern.prototype[month.toLowerCase()] = function(dayOfMonth) {\n    this._validated = false;\n    this.value.month_of_year = index + 1;\n    this.value.day_of_month = dayOfMonth;\n    this.value.instance = null;\n    return this;\n  };\n\n  Pattern.prototype['of' + month] = function(dayOfMonth) {\n    this._validated = false;\n    this.value.month_of_year = index + 1;\n    this.value.day_of_month = dayOfMonth;\n    return this;\n  };\n});\n",
    "/**\n * @enum {Number}\n * Days of the week.\n */\nexport default {\n  Sunday: 1,\n  Monday: 2,\n  Tuesday: 4,\n  Wednesday: 8,\n  Thursday: 16,\n  Friday: 32,\n  Saturday: 64,\n  All: 1 | 2 | 4 | 8 | 16 | 32 | 64,\n  Weekdays: 2 | 4 | 8 | 16 | 32,\n  Weekends: 1 | 64\n};\n",
    "export default class InvalidDateError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'InvalidDateError';\n    this.message = message;\n  }\n};\n",
    "export default class InvalidMaskError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'InvalidMaskError';\n    this.message = message;\n  }\n};\n",
    "export default class InvalidOperationError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'InvalidOperationError';\n    this.message = message;\n  }\n};\n",
    "export default class InvalidPatternError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'InvalidPatternError';\n    this.message = message;\n  }\n};\n",
    "export default class NotSupportedError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'NotSupportedError';\n    this.message = message;\n  }\n};\n",
    "import Pattern from './Pattern';\nimport Mask from './Mask';\nimport days from './days';\nimport type from './type';\n\nimport InvalidDateError from './errors/InvalidDateError';\nimport InvalidMaskError from './errors/InvalidMaskError';\nimport InvalidOperationError from './errors/InvalidOperationError';\nimport InvalidPatternError from './errors/InvalidPatternError';\nimport NotSupportedError from './errors/NotSupportedError';\n\nvar exports = function() {\n  return new Pattern();\n};\n\nexports.Pattern = Pattern;\nexports.Mask = Mask;\nexports.days = days;\nexports.type = type;\n\nexports.errors = {\n  InvalidDateError,\n  InvalidMaskError,\n  InvalidOperationError,\n  InvalidPatternError,\n  NotSupportedError\n};\n\nexport default exports;\n",
    "/**\n * @enum {Number}\n * Recurrence types.\n */\nexport default {\n  Daily: 1,\n  Weekly: 2,\n  Monthly: 3,\n  MonthNth: 4,\n  Yearly: 5,\n  YearNth: 6\n};\n",
    "import InvalidDateError from './errors/InvalidDateError';\n\nconst DATE_PATTERN = /[0-9]{4}\\-[0-9]{2}\\-[0-9]{2}/;\n\n/**\n * @param {String} date\n * @returns {Date}\n */\nexport function getDate(date) {\n  if (!DATE_PATTERN.test(date)) {\n    throw new InvalidDateError('Date \"' + date + '\" is invalid. Expected format to be YYYY-MM-DD.');\n  }\n  var result = new Date(date + 'T00:00:00.000Z');\n  if (isNaN(result.getTime())) {\n    throw new InvalidDateError('Date \"' + date + '\" is invalid.');\n  }\n  return result;\n};\n\n/**\n * @param {String} date\n */\nexport function validateDate(date) {\n  getDate(date);\n};\n\n/**\n * @param {Date} date\n * @returns {String}\n */\nexport function getString(date) {\n  var month = (date.getUTCMonth() + 1).toString();\n  if (month.length === 1) {\n    month = '0' + month;\n  }\n  var day = date.getUTCDate().toString();\n  if (day.length === 1) {\n    day = '0' + day;\n  }\n  return date.getUTCFullYear() + '-' + month + '-' + day;\n};\n\n/**\n * @param {Date} date\n * @returns {Number}\n */\nexport function getDayOfWeek(date) {\n  return date.getUTCDay();\n};\n\n/**\n * @param {Date} date\n * @returns {Number}\n */\nexport function getDayOfWeekFlag(date) {\n  return dayOfWeekToFlag(getDayOfWeek(date));\n};\n\n/**\n * @param {Number} day\n * @returns {Number}\n */\nexport function dayOfWeekToFlag(day) {\n  return Math.pow(2, day);\n};\n\n/**\n * @param {Date} date\n * @returns {Date}\n */\nexport function getSunday(date) {\n  return plusDays(date, -getDayOfWeek(date));\n};\n\n/**\n * Determines whether a given bit mask contains the specified bit flag.\n * @param {Number} mask\n * @param {Number} flag\n * @returns {Boolean}\n */\nexport function hasFlag(mask, flag) {\n  return (mask & flag) === flag;\n};\n\n/**\n * Converts a JavaScript date value to days.\n * @param {Number} value\n *   The number of milliseconds since midnight of Jan 1, 1970 UTC.\n * @returns {Number}\n */\nexport function durationToDays(duration) {\n  return (+duration) / 1000 / 60 / 60 / 24;\n};\n\n/**\n * @param {Number} duration\n * @returns {Number}\n */\nexport function durationToWeeks(duration) {\n  return durationToDays(duration) / 7;\n};\n\n/**\n * @param {Number} days\n * @returns {Number}\n */\nexport function daysToDuration(days) {\n  return days * 24 * 60 * 60 * 1000;\n};\n\n/**\n * @param {Date} date\n * @param {Number} days\n * @returns {Date}\n */\nexport function plusDays(date, days) {\n  return new Date(+date + daysToDuration(days));\n};\n\n/**\n * @param {Date} date\n * @param {Number} weeks\n * @returns {Date}\n */\nexport function plusWeeks(date, weeks) {\n  return plusDays(date, weeks * 7);\n};\n\n/**\n * @param {Number} mask\n * @returns {Array.<Number>}\n */\nexport function dayOfWeekMaskToArray(mask) {\n  var days = [0, 1, 2, 3, 4, 5, 6];\n  var result = [];\n  days.forEach(function(day) {\n    if (hasFlag(mask, dayOfWeekToFlag(day))) {\n      result.push(day);\n    }\n  });\n  return result;\n};\n\nexport function normalizeDirection(direction) {\n  return direction < 0 ? -1 : 1;\n};\n\nexport function extend(target, obj) {\n  var prop;\n  obj = obj || {};\n  for (prop in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n      target[prop] = obj[prop];\n    }\n  }\n  return target;\n};\n\nexport function find(array, callback) {\n  var index = findIndex(array, callback);\n  if (index > -1) {\n    return array[index];\n  } else {\n    return null;\n  }\n};\n\nexport function findIndex(array, callback) {\n  for (var i = 0; i < array.length; i++) {\n    if (callback(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nexport function repeat(string, times) {\n  var ret = '';\n  for (var i = 0; i < times; i++) {\n    ret += string;\n  }\n  return ret;\n};\n"
  ]
}